<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Daily Task Tracker v1.2</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Chart.js for analytics -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- Confetti library -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <!-- TITLE + DYNAMIC BADGES -->
  <div id="title-container">
    <div id="badgeLeft" class="title-badge"></div>
    <h1 style="margin:0 10px;">Daily Task Tracker v1.2</h1>
    <div id="badgeRight" class="title-badge"></div>
  </div>

  <!-- COUNTERS -->
  <p class="counter">Date: <span id="currentDate"></span></p>
  <p class="counter">Daily Tasks Left: <span id="tasksLeft"></span></p>
  <p class="counter">Daily Tasks Completed: <span id="tasksDone"></span></p>
  <p class="counter">Total Tasks Completed: <span id="totalTasksDone"></span></p>
  <p class="counter">Current Streak: <span id="streak"></span> days</p>
  <p class="counter">Longest Streak: <span id="longestStreak"></span> days</p>

  <!-- MAIN CONTROLS -->
  <button onclick="completeTask()">Complete Task</button>
  <button onclick="resetDay()">Reset Day</button>
  <button onclick="advanceDay(-1)">-1 Day</button>
  <button onclick="advanceDay(1)">+1 Day</button>
  <button onclick="exportTrackerData()">Save Backup</button>
  <input type="file" id="importInput" accept=".json" style="display:none"/>
  <button onclick="document.getElementById('importInput').click()">Import Backup</button>
  <button onclick="toggleMenu()">Menu</button>
  <button onclick="togglePomodoro()">Pomodoro</button>
  <button onclick="toggleAnalytics()">Analytics</button>

  <!-- CALENDAR -->
  <div class="calendar" id="calendar"></div>

  <!-- SETTINGS MENU -->
  <div id="menuOverlay" onclick="toggleMenu(false)"></div>
  <div id="settingsMenu">
    <select id="selectLeftBadge"></select>
    <select id="selectRightBadge"></select>
    <button onclick="toggleBadgeModal()">Badges</button>
    <button onclick="resetBadges()">Reset Badges</button>
    <h2>Settings Menu</h2>
    <button onclick="resetTotalTasks()">Reset Total Tasks</button>
    <button onclick="toggleDarkMode()">Toggle Dark Mode</button>
    <button onclick="resetDay()">Reset Day</button>
    <button onclick="advanceDay(-1)">-1 Day</button>
    <button onclick="advanceDay(1)">+1 Day</button>
    <button onclick="toggleMenu(false)">Close</button>
  </div>

  <!-- BADGE MODAL -->
  <div id="badgeModal">
    <h2>Achievements</h2>
    <div id="badgeGrid"></div>
    <button onclick="toggleBadgeModal(false)">Close</button>
  </div>
  <div id="badgePopup"></div>

  <!-- POMODORO MODAL -->
  <div id="pomodoroOverlay" onclick="togglePomodoro(false)"></div>
  <div id="pomodoroModal" class="pom-modal">
    <h2>Pomodoro Timer</h2>
    <div id="pomProgressContainer">
      <div id="pomTimerDisplay">25:00</div>
    </div>
    <button id="pomStartBtn">Start Pomodoro</button>
    <button onclick="togglePomodoro(false)">Close</button>
  </div>

  <!-- ANALYTICS MODAL -->
  <div id="analyticsOverlay" onclick="toggleAnalytics(false)"></div>
  <div id="analyticsModal" class="analytics-modal">
    <h2>Weekly • Monthly • Year Analytics</h2>

    <div class="chart-nav">
      <button onclick="changeWeek(-1)">&larr;</button>
      <span id="weeklyLabel" class="chart-label"></span>
      <button onclick="changeWeek(1)">&rarr;</button>
    </div>
    <div class="chart-container">
      <canvas id="weeklyChart"></canvas>
    </div>

    <div class="chart-nav">
      <button onclick="changeMonth(-1)">&larr;</button>
      <span id="monthlyLabel" class="chart-label"></span>
      <button onclick="changeMonth(1)">&rarr;</button>
    </div>
    <div class="chart-container">
      <canvas id="monthlyChart"></canvas>
    </div>

    <div class="chart-nav">
      <button onclick="changeYear(-1)">&larr;</button>
      <span id="yearLabel" class="chart-label"></span>
      <button onclick="changeYear(1)">&rarr;</button>
    </div>
    <div class="chart-container">
      <canvas id="yearChart"></canvas>
    </div>

    <button onclick="toggleAnalytics(false)">Close</button>
  </div>

  <script type="module" src="js/main.js"></script>
</body>
</html>
